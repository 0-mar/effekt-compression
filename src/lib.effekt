module src/lib

import stream
import io
import io/error
import mutable/map

def helloWorld(): String = "Hello, world!"



def run(filename: String): String = {
  var x = ""
  report[IOError] {
    readFile(filename) {
    var result = ""
    def go(): Unit = try {
      val readByte = decodeChar() // do read()
      result = result ++ readByte.show()
      //println(readByte)
      go()
    } with stop {
      ()
    }
    go()
    x = result
    }
  }
  
  x
}

